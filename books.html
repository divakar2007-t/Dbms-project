{% extends "base.html" %}
{% block title %}Books{% endblock %}
{% block content %}

<div class="dashboard-content">
  <h2 class="page-title">ðŸ“š Books Inventory</h2>

  <form method="GET" action="{{ url_for('books') }}" style="text-align:center; margin-bottom: 20px;">
    <input name="q" placeholder="Search books..." value="{{ q }}" style="width: 250px;">
    <button type="submit" class="btn">Search</button>
    <a href="{{ url_for('add_book') }}" class="btn" style="margin-left:10px;">âž• Add Book</a>
  </form>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>ISBN</th>
          <th>Quantity</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}
          <tr>
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{ book.isbn or '-' }}</td>
            <td>{{ book.quantity }}</td>
            <td>
              <a href="{{ url_for('edit_book', book_id=book.id) }}" class="btn" style="padding:6px 10px; font-size:13px;">Edit</a>
              
              <form action="{{ url_for('delete_book', book_id=book.id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn" style="background:#e74c3c; padding:6px 10px; font-size:13px;" onclick="return confirm('Delete this book?')">Delete</button>
              </form>

              {% if book.quantity > 0 %}
              <form action="{{ url_for('borrow', book_id=book.id) }}" method="POST" style="display:inline;">
                <button type="submit" class="btn" style="background:#2ecc71; padding:6px 10px; font-size:13px;">Borrow</button>
              </form>
              {% else %}
                <span style="color:#888; font-size:13px;">Out of stock</span>
              {% endif %}
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="5" style="text-align:center; color:#777;">No books found.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}


